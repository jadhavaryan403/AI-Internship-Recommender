{% extends "recommender/base.html" %}

{% block title %}AI Internship Matches{% endblock %}

{% block content %}

<div class="text-center mb-5">
    <h2 class="fw-bold">Your AI-Curated Internship Matches ğŸ¯</h2>
    <p class="text-muted fs-5">
        Ranked using deep semantic similarity between your resume and internship roles.
    </p>
</div>

{% if recommended_internships %}
<div class="d-flex justify-content-center">
    <div class="col-lg-8">

        {% for item in recommended_internships %}
        <div class="card shadow-lg border-0 rounded-4 mb-4">

            <div class="card-body p-4">

                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h4 class="fw-semibold">{{ item.internship.title }}</h4>
                    <span class="badge bg-success fs-6 px-3 py-2 rounded-pill">
                        {{ item.match_percentage }}% Match
                    </span>
                </div>

                <p class="text-muted">
                    {{ item.internship.description|truncatewords:45 }}
                </p>

                <!-- AI Match Bar -->
                <div class="mb-3">
                    <small class="text-muted">AI Semantic Alignment</small>
                    <div class="progress mt-1" style="height: 8px;">
                        <div class="progress-bar bg-success"
                             role="progressbar"
                             style="width: {{ item.match_percentage }}%;">
                        </div>
                    </div>
                </div>


                <div class="d-flex justify-content-between align-items-center mt-3">
                    <div class="small text-muted">
                        ğŸ¢ <strong>{{ item.internship.company }}</strong><br>
                        ğŸ’° Stipend: {{ item.internship.stipend }}<br>
                        â³ Duration: {{ item.internship.duration }}<br>
                        <strong>{{ item.matching_skills_count }}</strong> out of <strong>{{ item.total_skills_count }}</strong> required skills matched
                    </div>
                    

                    <a href="{% url 'recommender:internship_detail' item.internship.id %}"
                       class="btn btn-outline-primary rounded-pill px-4">
                        View Details â†’
                    </a>
                </div>

            </div>
        </div>
        {% endfor %}

    </div>
</div>

{% else %}
<div class="d-flex justify-content-center">
    <div class="col-lg-6">
        <div class="alert alert-warning text-center shadow-sm rounded-4 p-4">
            <h5 class="fw-bold">No High-Confidence Matches Found</h5>
            <p class="mb-0">
                Your resume vector does not strongly align with current internship embeddings.
                Add more skills, projects, and technologies to improve recommendations.
            </p>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}
